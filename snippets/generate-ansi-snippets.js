import { execSync } from "child_process";
import { writeFileSync } from "fs";

function runBat(filename) {
  return execSync(`bat -p --color always --theme ansi ${filename}`, { encoding: "utf8" });
}

const elixir = runBat("elixir.ex");
const python = runBat("python.py");
const typescript = runBat("typescript.ts");

const template = `/*
 * Autogenerated file.
 * Do not touch
 * Willy
 */

export const elixirSnippet = \`${elixir}\`;

export const pythonSnippet = \`${python}\`;

export const typescriptSnippet = \`${typescript}\`;
`;

writeFileSync("../src/lib/snippets.ts", template, "utf8");
console.log("donesies");
